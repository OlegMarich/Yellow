<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banana Reports ‚Äî Scanner</title>

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://unpkg.com/@zxing/library@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body data-mode="scanner">
  <div class="page page--scanner">

    <header class="page__header"></header>

    <section class="page__section">
      <div class="container">

        <!-- QR –±–ª–æ–∫ (–¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ç–µ–ª–µ—Ñ–æ–Ω—É) -->
        <div class="scanner-qr">
          <h3 class="scanner-qr__title">üì± –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ç–µ–ª–µ—Ñ–æ–Ω—É</h3>
          <p class="scanner-qr__description">
            –°–∫–∞–Ω—É–π QR‚Äë–∫–æ–¥ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Å–∫–∞–Ω–µ—Ä —É –±—Ä–∞—É–∑–µ—Ä—ñ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ.
          </p>
          <div id="qrBox" class="scanner-qr__code"></div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∏–π —Å–∫–∞–Ω–µ—Ä -->
        <div class="scanner">
          <h2 class="section__title">üì¶ Scanner</h2>

          <label class="form__label">
            –î–∞—Ç–∞:
            <input type="date" id="scanDate" class="input">
          </label>

          <button id="loadOrders" class="button button--primary button--full">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>

          <label class="form__label">
            –ö–ª—ñ—î–Ω—Ç:
            <select id="clientSelect" class="select">
              <div id="orderStatus" class="order-status"></div>
              <option value="">‚Äî –≤–∏–±–µ—Ä—ñ—Ç—å –∫–ª—ñ—î–Ω—Ç–∞ ‚Äî</option>
            </select>
          </label>

          <label class="form__label">
            –¢–∏–ø –ø–∞–ª–µ—Ç–∏:
            <select id="palletType" class="select">
              <option value="EURO PALLETS">–Ñ–≤—Ä–æ (4 —Å—Ç–æ–≤–ø—á–∏–∫–∏)</option>
              <option value="IND. PALLETS">–Ü–Ω–¥—É—Å—Ç—Ä—ñ–∞–ª—å–Ω–∞ (6 —Å—Ç–æ–≤–ø—á–∏–∫—ñ–≤)</option>
              <option value="PHP mini">PHP mini (2 —Å—Ç–æ–≤–ø—á–∏–∫–∏)</option>
            </select>
          </label>

          <label class="form__label">
            –Ø—â–∏–∫—ñ–≤ –Ω–∞ –ø–∞–ª–µ—Ç—ñ:
            <input type="number" id="palletHeight" class="input" value="48" inputmode="numeric">
          </label>

          <label class="form__label">
            –†–µ–∂–∏–º:
            <select id="scanMode" class="select">
              <option value="auto">AUTO ‚Äî —à–≤–∏–¥–∫–µ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è</option>
              <option value="manual">MANUAL ‚Äî —Ä—É—á–Ω–∏–π –ª—ñ—á–∏–ª—å–Ω–∏–∫</option>
            </select>
          </label>

          <label class="form__label">
            –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤:
            <input type="number" id="rowsCount" class="input" value="1" inputmode="numeric">
          </label>

          <div id="rowCheck" class="scanner__info"></div>

          <div class="pallet-sides">
            <label class="form__label">
              –°—Ç–æ—Ä–æ–Ω–∞ 1:
              <input type="number" id="side1" class="input side-input" value="0" inputmode="numeric">
            </label>

            <label class="form__label">
              –°—Ç–æ—Ä–æ–Ω–∞ 2:
              <input type="number" id="side2" class="input side-input" value="0" inputmode="numeric">
            </label>
          </div>

          <div id="palletCheck" class="scanner__info"></div>

          <label class="form__label">
            –°–∫–∞–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
          </label>

          <button id="startVideoScanner" class="button button--primary button--full">
            üé• –£–≤—ñ–º–∫–Ω—É—Ç–∏ –≤—ñ–¥–µ–æ‚Äë—Å–∫–∞–Ω–µ—Ä
          </button>

          <video id="videoScanner" class="video-scanner" autoplay playsinline muted
            style="width:100%; max-height:240px; display:none; border-radius:8px; margin-top:10px;">
          </video>

          <button id="cameraScanBtn" class="button button--primary button--big button--full">üì∑ –°–∫–∞–Ω—É–≤–∞—Ç–∏ —Ñ–æ—Ç–æ</button>
          <input type="file" id="cameraInput" accept="image/*" capture="environment" hidden>

          <img id="preview" class="scanner__preview">

          <input type="text" id="scanInput" class="input" placeholder="–°–∫–∞–Ω–æ–≤–∞–Ω–∏–π –Ω–æ–º–µ—Ä..." autocomplete="off">

          <label class="form__label">
            –ö—ñ–ª—å–∫—ñ—Å—Ç—å:
            <div class="qty">
              <input type="number" id="qtyInput" class="input qty__input" value="1" inputmode="numeric">
              <button id="manualPlusBtn" class="button button--primary qty__plus" type="button">+</button>
            </div>
          </label>

          <div class="section__actions">
            <button id="finishBtn" class="button button--primary button--full">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞</button>
            <button id="undoBtn" class="button button--secondary button--full">‚Ü©Ô∏è Undo</button>
          </div>

          <div id="log" class="scanner__log"></div>

          <div class="section__actions">
            <a href="/index.html" class="button button--secondary button--full">‚Üê Back to Home</a>
          </div>
        </div>

      </div>
    </section>

    <footer class="page__footer"></footer>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ —Ü–∏—Ñ—Ä–æ–≤–æ—ó –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏ -->
  <div id="manualKeyboard" class="modal-keypad">
    <div class="modal-keypad__content">

      <div class="modal-keypad__title">–î–æ–¥–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å:</div>

      <input id="manualQty" type="text" class="modal-keypad__input" readonly>

      <div class="modal-keypad__grid">
        <button class="modal-keypad__key" onclick="window.numPress(1)">1</button>
        <button class="modal-keypad__key" onclick="window.numPress(2)">2</button>
        <button class="modal-keypad__key" onclick="window.numPress(3)">3</button>

        <button class="modal-keypad__key" onclick="window.numPress(4)">4</button>
        <button class="modal-keypad__key" onclick="window.numPress(5)">5</button>
        <button class="modal-keypad__key" onclick="window.numPress(6)">6</button>

        <button class="modal-keypad__key" onclick="window.numPress(7)">7</button>
        <button class="modal-keypad__key" onclick="window.numPress(8)">8</button>
        <button class="modal-keypad__key" onclick="window.numPress(9)">9</button>

        <button class="modal-keypad__key" onclick="window.backspaceQty()">‚Üê</button>
        <button class="modal-keypad__key" onclick="window.numPress(0)">0</button>
        <button class="modal-keypad__key" onclick="window.clearQty()">‚åß</button>
      </div>

      <div class="modal-keypad__actions">
        <button class="modal-keypad__btn button--primary" onclick="window.confirmManualQty()">OK</button>
        <button class="modal-keypad__btn button--secondary" onclick="window.closeManualKeyboard()">Cancel</button>
      </div>

    </div>
  </div>

  <script type="module" src="/js/scanner.js"></script>
</body>

</html>